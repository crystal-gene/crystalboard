(this.webpackJsonpcrystalboard=this.webpackJsonpcrystalboard||[]).push([[0],{209:function(t,e){},402:function(t,e){},403:function(t,e){},434:function(t,e,a){"use strict";a.r(e);var n=a(4),r=a(39),c=a.n(r),s=a(54),i=a(69),o=a(5),u=a(0),l=a.n(u),d=a(17),j=a.n(d),p=a(469),h=(a(240),a(103)),x=a(474),m=a(475),b=a(476),f=a(481),O=a(482),g=a(473),y=a(108);function v(){function t(){var t=window;return{width:t.innerWidth,height:t.innerHeight}}var e=Object(u.useState)(t()),a=Object(o.a)(e,2),n=a[0],r=a[1];return Object(u.useEffect)((function(){function e(){r(t())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}function w(t){return S.apply(this,arguments)}function S(){return(S=Object(s.a)(c.a.mark((function t(e){var a,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return a=t.sent,t.next=5,a.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function I(t,e,a,n){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(c.a.mark((function t(e,a,n,r){var s,i,o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e+"?"+new URLSearchParams({run:n,tag:r}));case 2:return s=t.sent,t.next=5,s.json();case 5:return i=t.sent,t.next=8,fetch(a+"?"+new URLSearchParams({run:n,tag:r}));case 8:return o=t.sent,t.next=11,o.json();case 11:return u=t.sent,t.abrupt("return",{structures:i,stepMetadata:u});case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(p.a)((function(t){return{redText:{fontColor:"#f44336"},greenText:{fontColor:"#4caf50"}}}));var C=Object(p.a)((function(t){return{drawerPaper:{width:300,height:"100%",backgroundColor:"rgba(0, 0, 0, 0.03)"},drawer:{width:300,flexShrink:0},list:{overflowY:"auto",margin:0,padding:0},title:{margin:"10px 20px"},iconRoot:{minWidth:"30px"},listGutters:{paddingLeft:"15px",paddingRight:"0"},listItem:{margin:"0",paddingTop:0,paddingBottom:0},h6:{textWeight:300,fontSize:"17px"}}})),N=function(t){var e=t.index,a=t.data,r=t.style,c=C(),s="".concat(a.nameList[e].tag),i="".concat(a.nameList[e].run);return Object(n.jsx)("div",{style:r,children:Object(n.jsxs)(x.a,{button:!0,dense:!0,classes:{root:c.listItem,gutters:c.listGutters},onClick:function(){a.handleUpdate(e)},children:[Object(n.jsx)(m.a,{classes:{root:c.iconRoot},children:Object(n.jsx)(f.a,{checked:a.checkedIndex===e,value:"".concat(e),name:s,size:"small"})}),Object(n.jsx)(b.a,{primary:s.length>25?s.slice(0,25)+"...":s,secondary:i.length>25?i.slice(0,25)+"...":i})]})},"trajectory_".concat(e))},L=function(t){var e=t.checkedIndex,a=t.data,r=t.handleUpdate,c=C(),s=v().height;return Object(n.jsxs)(O.a,{variant:"permanent",className:c.drawer,classes:{paper:c.drawerPaper},children:[Object(n.jsx)("div",{className:c.title,children:Object(n.jsx)(y.a,{variant:"h6",className:c.h6,children:"Trajectory List"})}),Object(n.jsx)(g.a,{}),Object(n.jsx)(h.b,{classes:{root:c.list},itemData:{nameList:a,checkedIndex:e,handleUpdate:function(t){r("trajectory",t)}},itemCount:a.length,itemSize:52,height:s-48,width:300,children:N})]})},U=a(220),P=a(436),z=a(477),F=a(478),R=a(479),T=a(107),B=a.n(T),E=Object(p.a)((function(t){return{main:{flexGrow:1,paddingTop:t.spacing(2),paddingBottom:t.spacing(2)},container:{display:"flex",flexDirection:"column"},gridContainer:{flex:"0 0 auto",marginTop:t.spacing(3),marginBottom:t.spacing(2)},crystalPaper:{width:"fit-content","background-color":"rgba(0, 0, 0, 0.01)"},crystalContainer:{display:"flex",justifyContent:"center",alignItems:"center"},metadataPanel:{flex:"1 0 auto",margin:"20px 40px"},metadataTitle:{marginBottom:10}}})),M=function(t){var e=t.data,a=E(),r=["stepIndex","summary","fromInit","toFinal"];return Object(n.jsx)(F.a,{elevation:3,classes:{root:a.metadataPanel},children:Object(n.jsxs)(R.a,{children:[e.summary?Object(n.jsxs)(y.a,{className:a.metadataTitle,variant:"h5",children:["Initial state",Object(n.jsx)(B.a,{style:{verticalAlign:"middle"}}),"Final state (Summary)"]}):Object(n.jsxs)(y.a,{className:a.metadataTitle,variant:"h5",children:[e.fromInit?"Initial state (".concat(e.stepIndex,")"):"state ".concat(e.stepIndex),Object(n.jsx)(B.a,{style:{verticalAlign:"middle"}}),e.toFinal?"final state (".concat(e.stepIndex+1,")"):"state ".concat(e.stepIndex+1)]}),Object.keys(e).map((function(t){return r.includes(t)?Object(n.jsx)(n.Fragment,{}):Object(n.jsxs)(y.a,{variant:"body1",children:[Object(n.jsx)("b",{children:t}),": ","".concat(e[t])]},"metadata_".concat(t))}))]})})},W=function(t){var e=t.data,a=t.size,r=void 0===a?350:a,c=t.options,s=void 0===c?{}:c,o=E();return Object(n.jsx)(P.a,{variant:"outlined",classes:{root:o.crystalPaper},elevation:5,children:Object(n.jsx)(U.a,Object(i.a)({data:e,debug:!1,animation:"none",axisView:"SW",inletPadding:10,sceneSize:r,toggleVisibility:{}},s))})},G=function(t){var e=t.crystal1,a=t.crystal2,r=t.metadata,c=E();return Object(n.jsx)("main",{className:c.main,children:Object(n.jsxs)("div",{className:c.container,children:[Object(n.jsxs)(z.a,{container:!0,justify:"center",className:c.gridContainer,spacing:2,children:[Object(n.jsx)(z.a,{className:c.crystalContainer,item:!0,xs:5,children:Object(n.jsx)(W,{data:e})}),Object(n.jsx)(z.a,{className:c.crystalContainer,item:!0,xs:1,children:Object(n.jsx)(B.a,{style:{fontSize:40},color:"action"})}),Object(n.jsx)(z.a,{className:c.crystalContainer,item:!0,xs:5,children:Object(n.jsx)(W,{data:a})})]}),Object(n.jsx)(M,{data:r})]})})},D=a(480),_=a(483),A=Object(p.a)((function(t){return{drawerPaper:{width:240,height:"100%",backgroundColor:"rgba(0, 0, 0, 0.03)"},drawer:{width:240,flexShrink:0},list:{height:"400px",overflowY:"auto"},title:{margin:"10px 15px",justifyContent:"space-between",alignItems:"center",display:"flex"},iconRoot:{minWidth:"30px"},listGutters:{paddingLeft:"15px",paddingRight:0},h6:{fontSize:"17px"},buttonsContainer:{display:"flex",justifyContent:"center"},buttonList:{margin:"4px 0 0 0"},button:{margin:"3px",padding:0,width:66,height:35},summaryButton:{padding:"16px 6px",width:90,height:35,borderRadius:8,fontSize:12}}})),H=function(t){var e,a,r,c,s=t.columnIndex,i=t.rowIndex,o=t.style,u=t.data,l=t.summary,d=void 0===l?null:l,j=A();return null!==d?(e=d.index,a="".concat(d.step),r=d.handleUpdate,c=d.currentStepIndex):(a=(e=3*i+s)>=u.steps?null:"".concat(e+1),r=u.handleUpdate,c=u.currentStepIndex),null===a?Object(n.jsx)(n.Fragment,{}):Object(n.jsx)("div",{style:o,children:Object(n.jsx)(_.a,{title:null===d?"State ".concat(e," \u2192 State ").concat(e+1):" Summary of the trajectory",placement:"bottom",children:Object(n.jsx)(D.a,{className:null===d?j.button:j.summaryButton,variant:c===e?"contained":"outlined",color:c===e?null===d?"primary":"secondary":null===d?"default":"secondary",onClick:function(){r(e)},children:a})})},"step_".concat(e))},J=function(t){var e=t.currentStepIndex,a=t.steps,r=t.handleUpdate,c=A(),s=function(t){r("step",t)},i=v().height;return Object(n.jsxs)(O.a,{variant:"permanent",className:c.drawer,anchor:"right",classes:{paper:c.drawerPaper},children:[Object(n.jsxs)("div",{className:c.title,children:[Object(n.jsx)(y.a,{variant:"h6",className:c.h6,children:"Step List"}),Object(n.jsx)(H,{className:c.summaryButton,summary:{index:a.structures.length-1,step:"summary",currentStepIndex:e,handleUpdate:s}})]}),Object(n.jsx)(g.a,{}),Object(n.jsx)("div",{className:c.buttonsContainer,children:Object(n.jsx)(h.a,{className:c.buttonList,itemData:{steps:a.structures.length-1,currentStepIndex:e,handleUpdate:s},columnCount:3,columnWidth:70,width:230,rowCount:Math.ceil((a.structures.length-1)/3),rowHeight:40,height:i-60,children:H})})]})},V=Object(p.a)((function(t){return{root:{display:"flex"}}})),Y="/data/plugin/crystal",q={tracList:Y+"/tags",stepFile:Y+"/step",stepMetadata:Y+"/metadata"};function K(){var t=V(),e=Object(u.useRef)(!1),a=Object(u.useState)([]),r=Object(o.a)(a,2),l=r[0],d=r[1],j=Object(u.useState)({structures:[],stepMetadata:[]}),p=Object(o.a)(j,2),h=p[0],x=p[1],m=Object(u.useState)({}),b=Object(o.a)(m,2),f=b[0],O=b[1],g=Object(u.useState)({}),y=Object(o.a)(g,2),v=y[0],S=y[1],k=Object(u.useState)({}),C=Object(o.a)(k,2),N=C[0],U=C[1],P=Object(u.useState)(0),z=Object(o.a)(P,2),F=z[0],R=z[1],T=Object(u.useState)(null),B=Object(o.a)(T,2),E=B[0],M=B[1],W=Object(u.useCallback)((function(t,e){switch(t){case"trajectory":R(e);break;case"step":M(e),e===h.structures.length-1?(O(h.structures[0]),S(h.structures[h.structures.length-1]),U(Object(i.a)({summary:!0,fromInit:!0,toFinal:!0,stepIndex:e},h.stepMetadata[e]))):(O(h.structures[e]),S(h.structures[e+1]),U(Object(i.a)({summary:!1,fromInit:0===e,toFinal:e===h.structures.length-2,stepIndex:e},h.stepMetadata[e])));break;default:throw new Error("Unexpected action type: ".concat(t))}}),[h]);return Object(u.useEffect)((function(){(function(){var t=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.current){t.next=6;break}return t.t0=d,t.next=4,w(q.tracList);case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:e.current=!0;case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(u.useEffect)((function(){(function(){var t=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(l&&l.length>F)){t.next=6;break}return t.t0=x,t.next=4,I(q.stepFile,q.stepMetadata,l[F].run,l[F].tag);case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[F,l]),Object(u.useEffect)((function(){W("step",h.structures.length-1)}),[h,W]),Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsx)(L,{data:l,checkedIndex:F,handleUpdate:W}),Object(n.jsx)(G,{crystal1:f,crystal2:v,metadata:N}),Object(n.jsx)(J,{currentStepIndex:E,steps:h,handleUpdate:W})]})}j.a.render(Object(n.jsx)(l.a.StrictMode,{children:Object(n.jsx)(K,{})}),document.getElementById("root"))}},[[434,1,2]]]);
//# sourceMappingURL=main.1004d281.chunk.js.map